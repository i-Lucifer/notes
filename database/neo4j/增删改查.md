## 增

- 创建Person标签的节点
  - create 创建
  - Person 标签、节点类型 labels   面向对象中的类
  - {} 节点的属性  properties           面向对象中的属性
  - name  一个属性  John 属性值

```cypher
create (n:Person {name:'John'}) return n
                   
create (n:Person {name:'Lucifer',age:"30"}) return n
```

- 创建Location节点

```cypher
create (n:Location {city:'Suzhou',state:"CZ"})
                     
create (n:Location {city:'ZhouKou',state:"ZK"})
```

- 创建关系
  - 两个Person创建 了一个关系，他们是朋友  friends
  - 这是一个单项关系

```cypher
match (a:Person {name:'Zhanghong'}), (b:Person {name:'Lucifer'}) merge (a)-[:friends]->(b)
```

- 关系属性
  - 成为朋友时间

```cypher
match (a:Person {name:'Lucifer'}), (b:Person {name:'Xue'}) merge (a)-[:friends {since:2021}]->(b)
```

- 不同标签的关系	
  - BORN_IN 这里咱们约定为出生时间
  - Work_IN 这里咱们约定为工作时间

```cypher
match (a:Person {name:'Lucifer'}), (b:Location {city:'ZhouKou'}) merge (a)-[:BORN_IN {year:1992}]->(b);

match (a:Person {name:'Peng'}), (b:Location {city:'ZhouKou'}) merge (a)-[:BORN_IN {year:1992}]->(b);
match (a:Person {name:'Peng'}), (b:Location {city:'ZhouKou'}) merge (a)-[:Work_IN {year:2010}]->(b);
                                                                                                    
                                                                                                    
match (a:Person {name:'Lucifer'}), (b:Location {city:'Suzhou'}) merge (a)-[:Work_IN {year:2021}]->(b);
                                                                                                   
match (a:Person {name:'Zhanghong'}), (b:Location {city:'Suzhou'}) merge (a)-[:Work_IN {year:2021}]->(b);
match (a:Person {name:'Xue'}), (b:Location {city:'Suzhou'}) merge (a)-[:Work_IN {year:2021}]->(b);
match (a:Person {name:'Lu'}), (b:Location {city:'Suzhou'}) merge (a)-[:Work_IN {year:2021}]->(b);
match (a:Person {name:'Shi'}), (b:Location {city:'Suzhou'}) merge (a)-[:Work_IN {year:2021}]->(b);
match (a:Person {name:'Wu'}), (b:Location {city:'Suzhou'}) merge (a)-[:Work_IN {year:2021}]->(b);
match (a:Person {name:'Bian'}), (b:Location {city:'Suzhou'}) merge (a)-[:Work_IN {year:2021}]->(b);
```



- 创建节点并指定关系
  - 不推荐使用

```cypher
CREATE (a:Person {name:'Hu'})-[r:FRIENDS]->(b:Person {name:'Lucifer'})
                                                       
CREATE (a:Person {name:'Jun'})-[r:FRIENDS]->(b:Person {name:'Lucifer'})
                                                        
CREATE (a:Person {name:'Jun'})-[r:FRIENDS]->(b:Person {name:'Gao'})
```





## 删

- 清空所有图

```cypher
match (n) detach delete n
```

- 删除所有有关系的节点

```cypher
MATCH (a:Person {name:'Lucifer'})-[rel]-(b:Person) DELETE a,b,relationships
```



## 改

- 设置节点属性

```
MATCH (a:Person {name:'Xue'}) SET a.age=24

MATCH (a:Person {name:'Lucifer'}) SET a.age=29
```

- 删除节点属性

```
MATCH (a:Person {name:'Lucifer'}) REMOVE a.age
```

- 删除节点
  - 删除节点必须要先删除关系

```cypher
MATCH (a:Person {name:'Lucifer'}) DELETE a

MATCH (a:Location {city:'HangZhou'}) DELETE a

```





## 查

- 查询标签为Person的节点

```cypher
MATCH (n:Person) RETURN n LIMIT 25
```

-  查询Location标签

```cypher
MATCH (n:Location) RETURN n LIMIT 25
```



- 查询出生（BORN_IN）在Zhoukou的关系

```cypher
MATCH (a:Person)-[:BORN_IN]->(b:Location {city:'ZhouKou'}) RETURN a,b
```

- 查询工作（Work_IN）在Suzhou的关系

```cypher
MATCH (a:Person)-[:Work_IN]->(b:Location {city:'Suzhou'}) RETURN a,b
```



- 查询所有有关系的节点

```cypher
MATCH (a)--() RETURN a
```



- 查询所有有 Work_IN    BORN_IN 关系的节点

```cypher
MATCH (n)-[:Work_IN]-() RETURN n

MATCH (n)-[:BORN_IN]-() RETURN n
```



- 查找某人朋友的朋友

```cypher
MATCH (a:Person {name:'Zhanghong'})-[r1:friends]-()-[r2:friends]-(friend_of_a_friend) RETURN friend_of_a_friend.name AS fofName
```

