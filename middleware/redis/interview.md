[[TOC]]

[TOC]

## Redis面试

### 单线程问题

1. CPU是不Redis的性能瓶颈
2. Redis的瓶颈主要在内存大小和网络快慢
3. Redis的tps能达到百万级，(这个数值很高，具体这个只有什么用，笔者这里知识待补充)。

### 单线程不能充分利用CPU

1. 可以在不同的端口，启动多个Redis服务
2. 建议启动的数量为逻辑CPU数量减1甚至更少，留下一些核处理系统调度
3. 对Redis进行操作时，要知道操作的是哪个Redis服务
4. 确保Redis启动时绑定到对应的CPU，可以使用taskset命令指定

### Redis为什么这么快？Redis为什么单线程还是这么快？

- 我觉得要回答这个问题，可以从四个方面来分析。

  | 层面           | 分析                                                         |
  | -------------- | ------------------------------------------------------------ |
  | cpu            | 采用单线程，避免了多线程不必要的上下文切换、和竞争条件       |
  | 内存和硬盘     | Redis服务主要基于内存，和硬盘很少打交道。</br>内存随机读和顺序读都很优秀。当然硬盘的顺序读性价比更高(Mysql) |
  | 网络           | IO多路复用，非阻塞IO。多路指多个网络连接，复用指同一个线程。</br>采用IO多路复用技术可以让单个线程高效的处理多个连接请求。(但是依然有瓶颈) |
  | 数据结构与算法 | 数据简单，数据操作简单、多是O(1)，O(n)的时间复杂度           |
  | 编程语言       | c语言更接近与计算机底层                                      |

### 既然单线程已经这么快了，为什么Redis 6启用了多线程模型？

- 单线程的问题如下：
  - 在Redis中，单线程的性能瓶颈主要在网络IO操作上。读写网络的系统调用执行期间会占用大部分CPU时间。
  - 大key阻塞

### Redis阻塞问题

