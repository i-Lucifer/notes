## kafka基本概念

- broker 代理，中间人，在kafka里主要是指真实的物理机。
- topic 主题，就像两个人讨论一件事，得有个讨论的核心主题，这里可以暂时理解为分组。
- partition 分区 分区层面分Leader 和 Follow，也就是主从，从只进行备份。
- offset offset



### 消费组

- 可以只有一个成员(消费者)

- 一条消息能被多个组消费
- 组内成员是竞争关系，组内消息只能被消费一次
- 分区数==小组成员时，效率最高，没有闲置分区，也没有闲置成员



### zookeeper

- kafka服务端使用同一个zk，即可形成集群

- 偏移量存储(消费者内存一份+服务端)各一份
  - 0.9版本之前存在zk，需要维持连接，消费者pull数据，消费完push便宜量给zk
  - 0.9版本之后，kafka系统创建了一个topic，偏移量保存在这个topic中



### 消息持久化

- 存磁盘(redis是内存)
- 存储时间 默认7天
